@model EPS3.Models.LineItem

@{
    ViewData["Title"] = "Create";
}
@section Scripts{
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    <script type="text/javascript">
        $(document).ready(function () {
            // populate FiscalYear dropdown
            populateFiscalYearList(); 
        });
    </script>
}
<h2>Create</h2>

<h4>LineItem</h4>
<hr />

<form asp-action="Create" class="form-horizontal">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <input type="hidden" id="ContractID" name="ContractID" value="@ViewBag.ContractID" />
    <div class="row">
        <div class="col-sm-2">
            <dl>
                <dt>
                    @Html.LabelFor(model => model.OrgCode)
                </dt>
                <dd>
                    @Html.TextBoxFor(model => model.OrgCode)
                    @Html.ValidationMessageFor(model => model.OrgCode, "Org Code is required.")
                </dd>
            </dl>
        </div>
        <div class="col-sm-2">
            <dl>
                <dt>
                    @Html.LabelFor(model => model.FinancialProjectNumber)
                </dt>
                <dd>
                    @Html.TextBoxFor(model => model.FinancialProjectNumber)
                    @Html.ValidationMessageFor(model => model.FinancialProjectNumber, "A Financial Project Number is required.")
                </dd>
            </dl>
        </div>
        <div class="col-sm-4">
            <dl>
                <dt>
                    @Html.DisplayNameFor(model => model.StateProgramID)
                </dt>
                <dd>
                    @Html.DropDownList("StateProgramID", new SelectList((IEnumerable<StateProgram>)ViewData["StatePrograms"],  "ProgramID", "ProgramSelector"), " ")
                    @Html.ValidationMessageFor(model => model.StateProgramID, "A State Program value is required.")
                </dd>
            </dl>
        </div>
        <div class="col-sm-3">
            <dl>
                <dt>
                    @Html.DisplayNameFor(model => model.CategoryID)
                </dt>
                <dd>
                    @Html.DropDownList("CategoryID", new SelectList((IEnumerable<Category>)ViewData["Categories"], "CategoryID", "CategorySelector"), " ")
                    @Html.ValidationMessageFor(model => model.CategoryID, "An Category value is required.")
                </dd>
            </dl>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <dl>
                <dt>
                    @Html.LabelFor(model => model.WorkActivity)
                </dt>
                <dd>
                    @Html.TextBoxFor(model => model.WorkActivity)
                    @Html.ValidationMessageFor(model => model.WorkActivity, "An Work Activity is required.")
                </dd>
            </dl>
        </div>
        <div class="col-sm-1">
            <dl>
                <dt>
                    @Html.DisplayNameFor(model => model.OCAID)
                </dt>
                <dd>
                    <input type="hidden" id="OCAID" name="OCAID" />
                    <input type="text" id="OCASelector" name="OCASelector" />
                    @Html.ValidationMessageFor(model => model.OCAID, "An OCA value is required.")
                </dd>
            </dl>
        </div>
        <div class="col-sm-1">
            <dl>
                <dt>
                    @Html.LabelFor(model => model.ExpansionObject)
                </dt>
                <dd>
                    @Html.TextBoxFor(model => model.ExpansionObject)
                    @Html.ValidationMessageFor(model => model.ExpansionObject, "An Extension Object is required.")
                </dd>
            </dl>
        </div>
        <div class="col-sm-1">
            <dl>
                <dt>
                    @Html.LabelFor(model => model.FlairObject)
                </dt>
                <dd>
                    @Html.TextBoxFor(model => model.FlairObject)
                    @Html.ValidationMessageFor(model => model.FlairObject, "A Flair Object is required.")
                </dd>
            </dl>
        </div>
        <div class="col-sm-1">
            <dl>
                <dt>
                    @Html.DisplayNameFor(model => model.FundID)
                </dt>
                <dd>
                    <input type="hidden" id="FundID" name="FundID" />
                    <input type="text" id="FundSelector" name="FundSelector" />
                    @Html.ValidationMessageFor(model => model.FundID, "A Fund value is required.")
                </dd>
            </dl>
        </div>
        <div class="col-sm-2">
            <dl>
                <dt>
                    @Html.LabelFor(model => model.FiscalYear)

                </dt>
                <dd>
                    @Html.HiddenFor(model => model.FiscalYear)
                    <select id="FiscalYearList" name="FiscalYearList" class="fiscalyear"></select>
                    <p>The Fiscal Year runs from July 1 to June 30. </p><p>The current Fiscal Year is @ViewBag.CurrentFiscalYear.</p>
                    @Html.ValidationMessageFor(model => model.FiscalYear, "Fiscal Year is a four digit year, the first year in a two-year fiscal span (i.e., 2018 = FY 18-19).")
                </dd>
            </dl>
        </div>
        <div class="col-sm-2">
            <dl>
                <dt>
                    @Html.LabelFor(model => model.Amount)

                </dt>
                <dd>
                    <span class="input-group-addon">
                        <label for="Amount">
                            <span class="glyphicon glyphicon-usd btn btn-default"></span>
                            @Html.TextBoxFor(model => model.Amount)
                        </label>
                    </span>
                    @Html.ValidationMessageFor(model => model.Amount, "Amounts must be numeric values.")
                </dd>
            </dl>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <dl>
                <dt>
                    Line Item Type
                </dt>
                <dd>
                    <!-- Line Item Status record-->
                    <select id="LineItemType" name="LineItemType">
                        <option value="None"></option>
                        <option value="New">New</option>
                        <option value="Amendment">Amendment</option>
                        <option value="Supplemental">Supplemental</option>
                        <option value="LOA">LOA</option>
                        <option value="Renewal">Renewal</option>
                        <option value="Overrun">Overrun</option>
                        <option value="Settlement">Settlement</option>
                        <option value="Correction">Correction</option>
                        <option value="Deletion">Deletion</option>
                    </select>
                </dd>
            </dl>
        </div>
        <div class="col-sm-5">
            <dl>
                <dt>
                    Comments
                </dt>
                <dd>
                    <textarea name="Comments" id="Comments"></textarea>
                </dd>
            </dl>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <dl>
                <dd>
                    <input type="hidden" id="CurrentStatus" name="CurrentStatus" value="Draft" />
                    <input type="submit" value="Create" class="btn btn-default" title="Save Line in Draft status." />
                </dd>
            </dl>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-8">
            <dl>
                <dd>
                    <a asp-controller="Contracts" asp-action="Index">Back to List</a>
                </dd>
            </dl>
        </div>
    </div>
</form>


